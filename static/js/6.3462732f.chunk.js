(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{5609:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n(8),o=n(62),l=n(63),c=n(65),s=n(64),i=n(66),u=n(0),m=n.n(u),f=n(20),p=n(21),d=n(61),h=n(67),y=n(119),v=n.n(y);function b(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new Array(t-e+1),r=e;r<=t;r+=n)a[r]=r;return a.map(function(e,t){return u.createElement(v.a,{value:e,key:e},String(e))})}var g=n(75),w=n(25),E=n(68),O=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).updateSetting=function(){var e=n.state,t=e.players,a=e.werewolves,r=e.seers,o=e.doctors,l=e.interval,c={players:t,villagers:n.calcRemains(1),werewolves:a,seers:r,doctors:o,interval:l};n.props.updateSetting(c)},n.initGame=function(){return n.props.initGame(n.state.names,[n.calcRemains(1),n.state.werewolves,n.state.seers,n.state.doctors])},n.handleChange=function(e){switch(e.target.name){case"players":return n.setState(Object(r.a)({},n.state,{openName:!0,players:Number(e.target.value),werewolves:Math.max(1,Math.floor(Number(e.target.value)/3))}));default:return n.setState(Object(r.a)({},n.state,Object(a.a)({},e.target.name,Number(e.target.value))))}},n.handleNameChange=function(e){var t=n.state.names;return t[Number(e.target.name)]=e.target.value,n.setState(Object(r.a)({},n.state,{names:t}))},n.handleOpenName=function(){return n.setState(Object(r.a)({},n.state,{openName:!0}))},n.handleOpenRole=function(){return n.setState(Object(r.a)({},n.state,{openRole:!0}))},n.handleCancel=function(){return n.setState(Object(r.a)({},n.state,{openName:!1,openRole:!1}))},n.handleOk=function(){return n.handleCancel()},n.handleStart=function(){n.initGame(),n.updateSetting()},n.NameDialog=function(){for(var e=new Array(n.state.players),t=0;t<e.length;t++)e[t]=t+1;return m.a.createElement(h.b,{open:n.state.openName,onClose:n.handleCancel},m.a.createElement(h.f,null,"Names"),m.a.createElement(h.d,null,e.map(function(e,t){return m.a.createElement("div",{key:t,className:n.props.classes.wrapper},m.a.createElement(h.t,{name:String(t),value:n.state.names[t],label:"Player ".concat(e),onChange:n.handleNameChange}))})),m.a.createElement(h.c,null,m.a.createElement(h.a,{onClick:n.handleCancel,color:"secondary"},"Cancel"),m.a.createElement(h.a,{onClick:n.handleOk,color:"primary"},"Ok")))},n.calcRemains=function(e){var t=n.state;return t.players-t.werewolves-t.seers-t.doctors+e-1},n.RoleDialog=function(){var e=n.calcRemains(1);return m.a.createElement(h.b,{open:n.state.openRole,onClose:n.handleCancel},m.a.createElement(h.f,null,"Roles"),m.a.createElement(h.d,{className:n.props.classes.wrapper},m.a.createElement("form",null,m.a.createElement(h.h,{className:n.props.classes.formControl,disabled:!0},m.a.createElement(h.j,null,"The Villagers"),m.a.createElement(h.o,{name:"villagers",value:e},m.a.createElement(h.n,{value:e},e)))),m.a.createElement("form",null,m.a.createElement(h.h,{className:n.props.classes.formControl},m.a.createElement(h.j,null,"The Werewolves"),m.a.createElement(h.o,{name:"werewolves",value:n.state.werewolves,onChange:n.handleChange},b(1,n.calcRemains(n.state.werewolves))))),m.a.createElement("form",null,m.a.createElement(h.h,{className:n.props.classes.formControl},m.a.createElement(h.j,null,"The Seers"),m.a.createElement(h.o,{name:"seers",value:n.state.seers,onChange:n.handleChange},b(0,n.calcRemains(n.state.seers))))),m.a.createElement("form",null,m.a.createElement(h.h,{className:n.props.classes.formControl},m.a.createElement(h.j,null,"The Doctors"),m.a.createElement(h.o,{name:"doctors",value:n.state.doctors,onChange:n.handleChange},b(0,n.calcRemains(n.state.doctors)))))),m.a.createElement(h.c,null,m.a.createElement(h.a,{onClick:n.handleCancel,color:"secondary"},"Cancel"),m.a.createElement(h.a,{onClick:n.handleOk,color:"primary"},"Ok")))};var l=n.props.setting,i=l.players,u=l.seers,f=l.doctors;return n.state={openName:!1,openRole:!1,names:n.props.game.players.map(function(e){return e.name}),players:i,werewolves:Math.max(1,Math.floor(Number(n.props.setting.players)/3)),seers:u,doctors:f,interval:n.props.setting.interval},n}return Object(i.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:this.props.classes.root},m.a.createElement(h.u,{variant:"h4",gutterBottom:!0},"Game Setting"),m.a.createElement("form",{className:this.props.classes.wrapper,autoComplete:"off"},m.a.createElement(h.h,{className:this.props.classes.formControl},m.a.createElement(h.j,null,"Numbers of Players"),m.a.createElement(h.o,{name:"players",value:this.state.players,onChange:this.handleChange,onClose:this.handleOpenName},b(4,12)))),m.a.createElement("div",{className:this.props.classes.wrapper},m.a.createElement(h.a,{variant:"outlined",onClick:this.handleOpenName},"Player Names")),m.a.createElement(this.NameDialog,null),m.a.createElement("div",{className:this.props.classes.wrapper},m.a.createElement(h.a,{variant:"outlined",onClick:this.handleOpenRole},"Roles")),m.a.createElement(this.RoleDialog,null),m.a.createElement(h.h,{className:this.props.classes.formControl},m.a.createElement(h.j,null,"Interval seconds"),m.a.createElement(h.o,{name:"interval",value:this.state.interval,onChange:this.handleChange},b(30,600,30))),m.a.createElement("div",{className:this.props.classes.wrapper},m.a.createElement(h.g,Object.assign({onClick:this.handleStart,component:p.b},{to:"/night"},{variant:"extended",color:"primary",size:"large"}),"START")))}}]),t}(m.a.Component);t.default=Object(f.b)(function(e){return{setting:e.setting,game:e.game}},{updateSetting:function(e){return{type:w.a,setting:e}},initGame:g.c})(Object(E.a)(Object(d.withStyles)(function(e){return Object(d.createStyles)({root:{textAlign:"center",position:"absolute",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)"},wrapper:{margin:2*e.spacing.unit},formControl:{margin:e.spacing.unit,minWidth:150}})})(O)))},62:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a})},63:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",function(){return r})},64:function(e,t,n){"use strict";function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return a})},65:function(e,t,n){"use strict";function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(r="function"===typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"a",function(){return o})},66:function(e,t,n){"use strict";function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}n.d(t,"a",function(){return r})},68:function(e,t,n){"use strict";var a=n(70),r=n(73),o=n.n(r),l=n(61),c=n(0),s=Object(l.createMuiTheme)({palette:{primary:a.blue,secondary:a.pink},typography:{useNextVariants:!0}});t.a=function(e){return function(t){return c.createElement(l.MuiThemeProvider,{theme:s},c.createElement(o.a,null),c.createElement(e,t))}}},75:function(e,t,n){"use strict";var a=n(8),r=n(15);var o=n(9);n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return m});var l=function(e,t){var n=function(e){for(var t=Array.from(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[a],t[a]=r}return t}(function(e){var t=0,n=!0,a=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)t+=l.value}catch(f){a=!0,r=f}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}var s=new Array(t),i=0;for(var u in o.d)if(!isNaN(Number(u)))for(var m=0;m<e[u];m++)s[i++]=Number(u);return s}(t));return{type:o.c,game:{players:n.map(function(t,n){return{id:n+1,alive:!0,actioned:!1,name:e[n]||"Player ".concat(n+1),role:t,voteId:null,actionId:null}}),date:{day:0,time:o.f.night},state:{winner:null,lastDiedPlayer:null}}}},c=function(e,t,n){return{type:o.h,players:e.map(function(e){return e.id===t&&(e.voteId=n),e})}},s=function(e,t,n){return{type:o.a,players:e.map(function(e){return e.id===t&&(e.actionId=n),e})}},i=function(e,t){return{type:o.b,players:e.map(function(e){return e.id===t&&(e.actioned=!0),e})}};function u(e,t){var n=null,l=[],c=function(e){var t={},n=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;t.hasOwnProperty(s)?t[s]++:t[s]=1}}catch(p){a=!0,o=p}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}var i=0,u=[];for(var m in t)if(t.hasOwnProperty(m)&&-1!==Number(m)){var f=t[m];i===f?u=[].concat(Object(r.a)(u),[Number(m)]):i<f&&(i=f,u=[Number(m)])}return u[Math.floor(Math.random()*u.length)]||null}(e.map(function(e){return(t===o.f.night?e.voteId:e.actionId)||-1})),s=!0,i=!1,u=void 0;try{for(var m,f=e[Symbol.iterator]();!(s=(m=f.next()).done);s=!0){var p=m.value;p.role===o.d.doctor&&p.actionId&&(l=[].concat(Object(r.a)(l),[p.actionId]))}}catch(b){i=!0,u=b}finally{try{s||null==f.return||f.return()}finally{if(i)throw u}}if(c)for(var d=l,h=0;h<d.length;h++){var y=d[h];if(c===y){c=null;break}}var v=e.map(function(e){return e.id===c?(n=e,Object(a.a)({},e,{alive:!1,actioned:!1,actionId:null,voteId:null})):Object(a.a)({},e,{actioned:!1,actionId:null,voteId:null})});return{lastDiedPlayer:n,votedPlayers:v}}var m=function(e,t){var n=u(e.players,t),a=n.lastDiedPlayer,r=n.votedPlayers,l=function(e){var t=e.filter(function(e){return e.alive}),n=t.filter(function(e){return e.role===o.d.werewolf});return t.length===n.length?o.d.werewolf:0===n.length?o.d.villager:null}(r);return{type:o.e,game:{players:r,date:{day:t===o.f.night?e.date.day:e.date.day+1,time:t},state:{winner:l,lastDiedPlayer:a}}}}}}]);
//# sourceMappingURL=6.3462732f.chunk.js.map